(function(d){d.fn.zl_select=function(e){this.defaults={w:200,h:26,items_w:null,items_h:null};this.defaults=b(e,this);var h=c(this);var f=d(this);var g=this;f.each(function(r,y){var q=d(this);if(d(".select-container",q).length!=0){return true}var j=d("<a class='select-container' onclick='return false;' href='#' tabindex='-1' />");var s=d("<span />");var w=d("<div />");s.appendTo(j);w.appendTo(j);j.appendTo(q);q.width(c(g).w);j.height(c(g).h);j.css("line-height",c(g).h+"px");var v=j.offset().top;var l=j.offset().left;var n=j.innerWidth();var x=j.outerHeight();var u=w.outerWidth();s.width(c(g).w-10-u);var k=d("<div class='select-drop' />");var t=d("<ul class='items' />");t.appendTo(k);k.appendTo("body");var p=d(">select",q);var i=p.find("option");var m=p.find("option:selected");var o=m.attr("value");d(q).delegate(p,"change",function(A){var z=d(p).val();d("li",t).each(function(C,D){var B=d(D).attr("v");if(z==B){d(">span",j).text(d(D).text());d("li",t).removeClass("down");d(D).addClass("down")}})});i.each(function(A,D){var C=d("<li />");C.appendTo(t);var z=d(D).text();var B=d(D).attr("value");C.text(z);C.attr("v",B);if(o==B){d(">span",j).text(z);d("li",t).removeClass("down");C.addClass("down")}a._item_click(C,p,j,z,t,k);a._item_hover(C)});j.bind("click",function(){if(p.attr("disabled")){return}if(k.is(":hidden")){k.show();var F=j.offset().top;var E=j.offset().left;var C=j.innerWidth();var A=j.width();var D=j.outerHeight();var z=w.outerWidth();var B;if(c(g).items_h){B=c(g).items_h}else{B="auto"}k.css({top:F+D,left:E,width:c(g).items_w?c(g).items_w:C,height:B});s.width(c(g).w-10-z);d(document).delegate("body","click",function(H){var G=H.target;if(d(G).closest("a.select-container").length==0){k.hide();d(document).undelegate("body","click")}})}else{k.hide()}});f.reloadData=function(C){var B,A,z,C;t.empty();B=p.find("option");A=p.find("option:selected");z=A.attr("value");B.each(function(E,H){var G=d("<li />");G.appendTo(t);var D=d(H).text();var F=d(H).attr("value");G.text(D);G.attr("v",F);if(z==F){d(">span",j).text(D);d("li",t).removeClass("down");G.addClass("down")}a._item_click(G,p,j,D,t,k);a._item_hover(G)})}});return f};var a={_item_click:function(j,i,f,e,h,g){j.bind("click",function(){var k=j.attr("v");i.val(k);d(">span",f).text(e);d("li",h).removeClass("down");j.addClass("down");g.hide();i.trigger("change")})},_item_hover:function(e){e.hover(function(){d(this).addClass("over")},function(){d(this).removeClass("over")})}};function b(e,f){f.defaults=d.extend({},f.defaults,e);return f.defaults}function c(e){return e.defaults}})(jQuery);